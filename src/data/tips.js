// src/data/tips.js
const norm = (s) => (s ?? "").toString().replace(/\s+/g, "").replace(/[^\w가-힣>_-]/g, "");

export const TipsDB = {
  /* ───────── 경로별 tips (from>to) ───────── */
  routes: {
    // 세종대왕 동상 → 광화문
    [norm("세종대왕동상>광화문")]: [
      "광화문은 경복궁의 정문으로 남쪽 육조거리(현재 세종대로) 축선의 북단에 선다.",
      "이 일대는 조선 시대 국가 행정의 중심 축선(육조거리)과 맞닿는다."
    ],

    // 광화문 → 흥례문
    [norm("광화문>흥례문")]: [
      "광화문 통과 후 넓은 월대와 흥례문이 일렬 축선을 이룬다.",
      "의례 동선의 시작 구간으로, 왕이 정전 영역으로 나아갈 때 거치는 문이다."
    ],

    // 흥례문 → 영제교
    [norm("흥례문>영제교")]: [
      "흥례문 앞마당 북측에 금천(명당수)이 흐르고, 그 위에 영제교가 놓인다.",
      "다리를 건너며 속세에서 성역으로 들어선다는 상징을 부여했다."
    ],

    // 영제교 → 근정문
    [norm("영제교>근정문")]: [
      "근정문은 근정전 앞 삼문 체계를 여는 문으로 조회·의식 동선의 관문이다.",
      "왕이 정전 마당으로 나아갈 때 주로 통과하던 정문이다."
    ],

    // 근정문 → 수정전
    [norm("근정문>수정전")]: [
      "수정전 일대는 세종대 집현전이 있던 구역으로 학문·정책 토론의 중심이었다.",
      "정전 뒤 업무 영역으로 들어가는 길목이다."
    ],

    // 수정전 → 경회루
    [norm("수정전>경회루")]: [
      "경회루는 국가 연회·사신 접대의 무대로, 연지와 석교가 어우러진 누각이다.",
      "가뭄 시 기우제를 지내기도 하여 의례·외교 겸용 공간이었다."
    ],

    // 경회루 → 아미산
    [norm("경회루>아미산")]: [
      "경복궁 중건 때 연못 준설토 일부가 아미산 화계에 성토되었다는 전승이 있다.",
      "정전 서측 연회 공간에서 내전 후원(교태전 뒤)으로 넘어가는 구간."
    ],

    // 아미산 → 생물방/소주방
    [norm("아미산>생물방소주방")]: [
      "소주방은 임금 수라와 연회음식을 담당한 궁중 부엌 권역이다.",
      "내소주방·외소주방·생물방 등으로 나뉘며 업무 분장이 세밀했다."
    ],

    // 소주방 → 근정전
    [norm("소주방>근정전")]: [
      "근정전은 국가의식·외교 의전이 열린 정전으로 조정의 상징 공간이다.",
      "연회·의식 준비는 내전·주방 권역과 유기적으로 연계됐다."
    ],

    // 근정전 → 광화문 (필수X 루트 포함)
    [norm("근정전>광화문")]: [
      "정전 영역에서 도성 남쪽 축선으로 빠져나가는 하산(下殿) 동선.",
      "광화문 바깥은 육조거리였으며 관청들이 도열해 있었다."
    ],

    // 서십자각터 → 광화문
    [norm("서십자각터>광화문")]: [
      "서십자각은 궁궐 외곽 방어 체계의 모서리 각루 중 하나였다.",
      "현재 유구만 남았으나 궁장-각루 체계로 외곽을 지켰다."
    ],
  },

  /* ───────── 장소별 tips (to 기준) ───────── */
  places: {
    [norm("광화문")]: [
      "1426년(세종 8) ‘빛이 사방에 퍼져 교화한다’는 뜻에서 이름이 붙었다.",
      "일제강점기 훼철·이전 피해 후 2010년 제자리에 복원됐다.",
      "현판 글씨는 2010년 복원 시 한글 전서체를 사용했다가, 이후 목재·도장 재정비를 거쳤다."
    ],

    [norm("흥례문")]: [
      "본래 ‘홍례문(弘禮門)’이었으나 1867년(고종 4) 중건 때 청 황제 건륭제의 휘(弘曆)를 피해 ‘흥례문(興禮門)’으로 개칭.",
      "정전 영역으로 들어가는 두 번째 문으로 넓은 월대와 연결된다."
    ],

    [norm("영제교")]: [
      "금천(백운동천) 위의 석교로, 성역 진입의 상징적 경계다.",
      "난간에는 서수(상상동물) 석상이 배치되어 화재·재난을 물리친다는 의미를 담았다.",
      "다리 너머로 근정문-근정전이 일직선 축으로 선다."
    ],

    [norm("근정문")]: [
      "1395년 창건, 임진왜란 때 소실 뒤 1867년 중건.",
      "근정전 앞마당으로 들어가는 정문으로 조회·의식 전 대기·정렬의 기준점."
    ],

    [norm("근정전")]: [
      "경복궁의 정전(正殿). 새해 하례·표훈례·과거 급제자 조회 등 국가 의식 거행.",
      "겹처마의 다포식 목조건축으로 위계와 장엄성을 드러낸다.",
      "정전 마당에는 품계석이 좌우로 배치되어 신료의 서열을 표시한다."
    ],

    [norm("수정전")]: [
      "세종 때 집현전이 있던 자리로 학문 연구와 경연이 이루어졌다.",
      "온돌·굴뚝 등 생활·업무 요소가 공존하는 전각 군으로 기록된다."
    ],

    [norm("경회루")]: [
      "연지 중앙 인공섬과 3개의 석교, 그리고 누각 하부 48개 화강석 기둥이 조화를 이룬다.",
      "1867년 중건(임진왜란 소실 후)으로 현 모습이 갖추어졌다.",
      "봄가을 연회와 외교 환대, 가뭄 때 기우제가 거행되었다."
    ],

    [norm("아미산")]: [
      "교태전 뒤 화계(꽃계단) 언덕으로, ‘아미(蛾眉)’는 초승달 같은 부드러운 산세를 뜻한다는 설이 있다.",
      "교태전 뒤편의 장식 굴뚝 4기에는 십장생·보상화·연꽃 등 화려한 벽돌 무늬가 새겨졌다.",
      "경복궁 중건 시 연못 준설토를 성토했다는 전승이 전해진다."
    ],

    [norm("생물방소주방")]: [
      "소주방은 임금 수라와 연회 음식 총괄 구역. 내소주방·외소주방·생물방으로 나뉜다.",
      "생물방은 과일·차·후식류 등 신선 식재·찬품을 담당한 것으로 전한다.",
      "궁중음식은 의례 격식에 따라 메뉴·그릇·진설 순서까지 엄격히 규정되었다."
    ],
  },

  /* ───────── 공통 tips ───────── */
  common: {
    COMMON: [
      "현장 표지판 QR·안내지도를 함께 보면 동선 파악이 쉽다.",
      "행사·통제 구간이 수시로 바뀔 수 있으니 안내 방송을 확인하자."
    ]
  }
};

/* 경로/장소별 tips 합치기 */
export function getTipsFor({ from, to }) {
  const f = norm(from);
  const t = norm(to);
  const byRoute = TipsDB.routes?.[`${f}>${t}`] ?? [];
  const byPlace = TipsDB.places?.[t] ?? [];
  const common = TipsDB.common?.COMMON ?? [];
  // 중복 제거
  return [...new Set([...byRoute, ...byPlace, ...common].filter(Boolean))];
}
