<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NAVI</title>
  <link rel="preconnect" href="https://dapi.kakao.com">
  <link rel="preconnect" href="https://t1.daumcdn.net">
  <style>
    @font-face {
      font-family: "SkyblessingInje";
      src: url("assets/fonts/SkyblessingInjeFontTTF.ttf") format("truetype");
    }

    @font-face {
      font-family: "Pretendard";
      src: url("assets/fonts/Pretendard-Regular.ttf") format("truetype");
    }

    /* ✅ 전체 배경 색상 적용 */
    body {
      margin: 0;
      background-color: #d7c3a5;
    }
  </style>
</head>

<body>
  <div id="mapWrap" style="
   margin: 100; 
    position:fixed; left:20px; right:20px; top:30px; height:42vh;
    display:none; z-index:10001;          /* ↑ 수정 */
    background:#d7c3a5; border-radius:14px;
    pointer-events:auto; box-sizing:border-box;
    box-shadow:0 4px 12px rgba(253, 253, 253, 0.25);
  ">
    <div id="kmap" style="width:100%;height:100%;border-radius:14px;overflow:hidden;"></div>
    <button id="closeMap" style="position:absolute;top:14px;right:14px;padding:8px 12px;">닫기</button>
  </div>
  <!-- 텍스트입력기능을 위해 부모 엘리먼트 고정 + DOM 컨테이너 확실히 만들기 -->
  <div id="game-root" style="position:relative; overflow:hidden;"></div>
  <script type="module" src="/src/main.js"></script>
 

  <!-- index.html -->
  <script type="module" src="/src/main.js"></script>

  <!-- 테스트할 때만 사용 -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <script>
    (async () => {
      // GSI가 실제로 준비될 때까지 폴링
      await new Promise((res) => {
        const check = () => (window.google?.accounts?.id ? res() : setTimeout(check, 30));
        check();
      });

      const CID = "137853659212-b5bngif7sh647a5q5ii9pvavq2eh58kk.apps.googleusercontent.com";
      console.log("origin =", location.origin);

      google.accounts.id.initialize({
        client_id: CID,
        ux_mode: "popup",
        callback: (resp) => {
          console.log("ID토큰 수신?", !!resp?.credential, resp);
        },
      });

      // 사용자 클릭 없이도 원탭 가능 환경이면 뜸(안 떠도 정상)
      google.accounts.id.prompt((n) => {
        console.log("isDisplayed:", n.isDisplayed(),
          "notDisplayed:", n.isNotDisplayed(), n.getNotDisplayedReason?.(),
          "dismissed:", n.isDismissed(), n.getDismissedReason?.());
      });
    })();
  </script>

</body>

</html>